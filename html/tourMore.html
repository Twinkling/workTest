<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>tour more page</title>
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="../css/app.css">
    <style type="text/css">
        .filter-title-text {
            width: calc(100%/3);
        }
    </style>
    <script type="text/javascript">
        (function () {
            var Dpr = 1,
                uAgent = window.navigator.userAgent;
            var isIOS = uAgent.match(/iphone/i);
            var isYIXIN = uAgent.match(/yixin/i);
            var is2345 = uAgent.match(/Mb2345/i);
            var ishaosou = uAgent.match(/mso_app/i);
            var isSogou = uAgent.match(/sogoumobilebrowser/ig);
            var isLiebao = uAgent.match(/liebaofast/i);
            var isGnbr = uAgent.match(/GNBR/i);
            function resizeRoot() {
                var wWidth = (screen.width > 0) ? (window.innerWidth >= screen.width || window.innerWidth == 0) ? screen.width :
                    window.innerWidth : window.innerWidth,
                    wDpr, wFsize;
                var wHeight = (screen.height > 0) ? (window.innerHeight >= screen.height || window.innerHeight == 0) ?
                    screen.height : window.innerHeight : window.innerHeight;
                if (window.devicePixelRatio) {
                    wDpr = window.devicePixelRatio;
                } else {
                    wDpr = isIOS ? wWidth > 818 ? 3 : wWidth > 480 ? 2 : 1 : 1;
                }
                if (isIOS) {
                    wWidth = screen.width;
                    wHeight = screen.height;
                }
                // if(window.orientation==90||window.orientation==-90){
                //     wWidth = wHeight;
                // }else if((window.orientation==180||window.orientation==0)){
                // }
                if (wWidth > wHeight) {
                    wWidth = wHeight;
                }
                wFsize = wWidth > 1080 ? 144 : wWidth / 7.5;
                wFsize = wFsize > 32 ? wFsize : 32;
                window.screenWidth_ = wWidth;
                if (isYIXIN || is2345 || ishaosou || isSogou || isLiebao || isGnbr) { //YIXIN 和 2345 这里有个刚调用系统浏览器时候的bug，需要一点延迟来获取
                    setTimeout(function () {
                        wWidth = (screen.width > 0) ? (window.innerWidth >= screen.width || window.innerWidth == 0) ?
                            screen.width : window.innerWidth : window.innerWidth;
                        wHeight = (screen.height > 0) ? (window.innerHeight >= screen.height || window.innerHeight ==
                            0) ? screen.height : window.innerHeight : window.innerHeight;
                        wFsize = wWidth > 1080 ? 144 : wWidth / 7.5;
                        wFsize = wFsize > 32 ? wFsize : 32;
                        // document.getElementsByTagName('html')[0].dataset.dpr = wDpr;
                        document.getElementsByTagName('html')[0].style.fontSize = wFsize + 'px';
                    }, 500);
                } else {
                    // document.getElementsByTagName('html')[0].dataset.dpr = wDpr;
                    document.getElementsByTagName('html')[0].style.fontSize = wFsize + 'px';
                }
                // alert("fz="+wFsize+";dpr="+window.devicePixelRatio+";UA="+uAgent+";width="+wWidth+";sw="+screen.width+";wiw="+window.innerWidth+";wsw="+window.screen.width+window.screen.availWidth);
            }
            resizeRoot();
        })();
    </script>
</head>
<body>
    <div class="filter-wrap">
        <ul class="filter-title" id="filterTitle">
            <li class="filter-title-text" data-index='0'><span>附近</span><i></i></li>
            <li class="filter-title-text" data-index='1'><span>排序</span><i></i></li>
            <li class="filter-title-text" data-index='2'><span>筛选</span><i></i></li>
        </ul>
        <div class="filter-content-shadow" id="filterShadow">   
            <ul class="filter-content" data-type='area'>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="思明区">思明区</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="湖里区">湖里区</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="集美区">集美区</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="海沧区">海沧区</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="翔安区">翔安区</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="同安区">同安区</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-reset-btn">重置</div>
                    <div class="filter-save-btn">完成</div>
                </li>
            </ul>         
            <ul class="filter-content" data-type='order'>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="时间">时间</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="最新">最新</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="最热">最热</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-reset-btn">重置</div>
                    <div class="filter-save-btn">完成</div>
                </li>
            </ul>
            <ul class="filter-content" data-type='filter'>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="景点">景点</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="民宿">民宿</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-item-text" data-type="美食">美食</div>
                    <div class="filter-item-checkbox"></div>
                </li>
                <li class="filter-item">
                    <div class="filter-reset-btn">重置</div>
                    <div class="filter-save-btn">完成</div>
                </li>
            </ul>
        </div>
    </div>
    <ul class="collect-list-items">
        <li class="collect-item-wrap">
            <div class="collect-item-img-wrap"><img src="../imgs/find/nhc/szt.jpg" alt=""></div>
            <div class="collect-item-desc">
                <div class="collect-item-text">
                    <div class="collect-item-name">双子塔</div>
                </div>
                <div class="collect-item-detail-desc">
                    <p>000000评论</p>
                    <p>距离0.1公里，靠近厦大</p>
                    <p>开放时间：12：11~17：11</p>
                </div>
                <div class="collect-item-operate">
                    <div class="collect-item-contact"><span>查看详情</span></div>
                    <div class="collect-item-cancel"><span>取消收藏</span></div>
                </div>
            </div>
        </li>
        <li class="collect-item-wrap">
            <div class="collect-item-img-wrap"><img src="../imgs/find/nhc/szt.jpg" alt=""></div>
            <div class="collect-item-desc">
                <div class="collect-item-text">
                    <div class="collect-item-name">双子塔</div>
                </div>
                <div class="collect-item-detail-desc">
                    <p>000000评论</p>
                    <p>距离0.1公里，靠近厦大</p>
                    <p>开放时间：12：11~17：11</p>
                </div>
                <div class="collect-item-operate">
                    <div class="collect-item-contact"><span>查看详情</span></div>
                    <div class="collect-item-cancel"><span>取消收藏</span></div>
                </div>
            </div>
        </li>
        <li class="collect-item-wrap">
            <div class="collect-item-img-wrap"><img src="../imgs/find/nhc/szt.jpg" alt=""></div>
            <div class="collect-item-desc">
                <div class="collect-item-text">
                    <div class="collect-item-name">双子塔</div>
                </div>
                <div class="collect-item-detail-desc">
                    <p>000000评论</p>
                    <p>距离0.1公里，靠近厦大</p>
                    <p>开放时间：12：11~17：11</p>
                </div>
                <div class="collect-item-operate">
                    <div class="collect-item-contact"><span>查看详情</span></div>
                    <div class="collect-item-cancel"><span>取消收藏</span></div>
                </div>
            </div>
        </li>
        <li class="collect-item-wrap">
            <div class="collect-item-img-wrap"><img src="../imgs/find/nhc/szt.jpg" alt=""></div>
            <div class="collect-item-desc">
                <div class="collect-item-text">
                    <div class="collect-item-name">双子塔</div>
                </div>
                <div class="collect-item-detail-desc">
                    <p>000000评论</p>
                    <p>距离0.1公里，靠近厦大</p>
                    <p>开放时间：12：11~17：11</p>
                </div>
                <div class="collect-item-operate">
                    <div class="collect-item-contact"><span>查看详情</span></div>
                    <div class="collect-item-cancel"><span>取消收藏</span></div>
                </div>
            </div>
        </li>
        <li class="collect-item-wrap">
            <div class="collect-item-img-wrap"><img src="../imgs/find/nhc/szt.jpg" alt=""></div>
            <div class="collect-item-desc">
                <div class="collect-item-text">
                    <div class="collect-item-name">双子塔</div>
                </div>
                <div class="collect-item-detail-desc">
                    <p>000000评论</p>
                    <p>距离0.1公里，靠近厦大</p>
                    <p>开放时间：12：11~17：11</p>
                </div>
                <div class="collect-item-operate">
                    <div class="collect-item-contact"><span>查看详情</span></div>
                    <div class="collect-item-cancel"><span>取消收藏</span></div>
                </div>
            </div>
        </li>
    </ul>
    <script type="text/javascript" src="../js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript">
        $(function () {
            var $filterShadow = $('#filterShadow'),
                $filterType = $('.filter-title-text'),
                $filterContent = $('.filter-content'),
                $filterCheckbox = $('.filter-item-checkbox'),
                $reset = $('.filter-reset-btn'),
                $save = $('.filter-save-btn');
            $filterType.click(function (e) {
                e.stopPropagation();
                var _this = this;
                $filterShadow.show();
                $(this).addClass('on').siblings().removeClass('on');
                var ind = $(this).attr('data-index');
                $filterContent.eq(ind).show().siblings().hide();
            });
            $filterCheckbox.click(function (e) {
                e.stopPropagation();
                var $parents = $(this).parents('ul');
                $parents.eq(0).attr('data-type') === 'area' ? ($(this).parent().toggleClass('on').siblings().removeClass('on')) : ($(this).parent().toggleClass('on'));
            });
            $reset.click(function (e) {
                e.stopPropagation();
                $(this).parent().siblings().removeClass('on');
            });
            $save.click(function (e) {
                e.stopPropagation();
                var _this = this;
                var datas = {
                    area: [],
                    order: [],
                    filter: [],
                };
                $filterContent.each(function (index, item) {
                    var type = $(this).attr('data-type');
                    switch(type) {
                        case 'area': 
                            $(this).find('li.on').each(function () {
                                var data = $(this).find('.filter-item-text').attr('data-type');
                                datas.area.push(data);
                            });
                            break;
                        case 'order': 
                            $(this).find('li.on').each(function () {
                                var data = $(this).find('.filter-item-text').attr('data-type');
                                datas.order.push(data);
                            });
                            break;
                        case 'filter': 
                            $(this).find('li.on').each(function () {
                                var data = $(this).find('.filter-item-text').attr('data-type');
                                datas.filter.push(data);
                            });
                            break;
                        default:
                            break;
                    }
                });
                $filterShadow.hide();
                $filterType.removeClass('on');
                request(datas);
            });
            $filterShadow.click(function (e) {
                e.stopPropagation();
                // $(this).hide();
                if(e.target === this) {
                    $(this).hide() && $filterType.removeClass('on');
                }
            });

            function request(datas) {
                console.log('request',datas);
            };
        });
    </script>
</body>
</html>